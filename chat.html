<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chat Room</title>

<style>
*{
  box-sizing:border-box;
  font-family:'Segoe UI',sans-serif;
}

body{
  margin:0;
  height:100vh;
  background:linear-gradient(135deg,#020617,#1e293b);
  display:flex;
  justify-content:center;
  align-items:center;
}

.chat-container{
  width:420px;
  height:550px;
  background:#fff;
  border-radius:15px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
  display:flex;
  flex-direction:column;
}

.chat-header{
  background:#2563eb;
  color:white;
  padding:15px;
  text-align:center;
  font-size:18px;
  border-radius:15px 15px 0 0;
}

.chat-messages{
  flex:1;
  padding:15px;
  overflow-y:auto;
  background:#f8fafc;
}

.msg{
  margin-bottom:10px;
  padding:8px 12px;
  background:#e5e7eb;
  border-radius:10px;
  font-size:14px;
}

.msg span{
  font-weight:bold;
  color:#2563eb;
}

.chat-input{
  display:flex;
  padding:10px;
  border-top:1px solid #ddd;
}

.chat-input input{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  outline:none;
}

.chat-input button{
  margin-left:8px;
  padding:10px 15px;
  background:#2563eb;
  color:white;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="chat-container">
  <div class="chat-header">ðŸ’¬ Global Chat</div>

  <div class="chat-messages" id="messages"></div>

  <div class="chat-input">
    <input id="messageInput" placeholder="Type a message..." />
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const messagesDiv = document.getElementById("messages");

// example username (later uzayikura muri login/session)
const username = "User" + Math.floor(Math.random()*1000);

// send message
function sendMessage(){
  const input = document.getElementById("messageInput");
  const message = input.value;
  if(!message) return;

  socket.emit("sendMessage", {
    user: username,
    text: message
  });

  input.value="";
}

// receive message
socket.on("receiveMessage", (data)=>{
  const div = document.createElement("div");
  div.className = "msg";
  div.innerHTML = `<span>${data.user}:</span> ${data.text}`;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
});
</script>
<script src="socket.io/socket.io.js"></script>
<script src="chat.js"></script>
</body>
</html>